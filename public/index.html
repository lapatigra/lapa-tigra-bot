<!DOCTYPE html>

<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#080808">
    <title>–†–µ–ø–µ—Ä—Ç—É–∞—Ä LAPA TIGRA</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

```
    html { background: #080808; height: -webkit-fill-available; }

    body {
        font-family: 'Montserrat', sans-serif;
        background: #080808;
        color: #fff;
        min-height: 100vh;
        min-height: -webkit-fill-available;
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        position: relative;
        overflow-x: hidden;
    }

    body::before {
        content: '';
        position: fixed;
        inset: 0;
        background:
            radial-gradient(ellipse 60% 50% at 20% 50%, rgba(255,87,34,0.12) 0%, transparent 70%),
            radial-gradient(ellipse 60% 50% at 80% 50%, rgba(180,30,10,0.10) 0%, transparent 70%),
            radial-gradient(ellipse 100% 40% at 50% 100%, rgba(255,111,0,0.08) 0%, transparent 60%),
            #080808;
        z-index: 0;
        pointer-events: none;
    }

    #app {
        width: 100%;
        max-width: 430px;
        background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #2d1810 100%);
        min-height: 100vh;
        position: relative;
        z-index: 2;
        box-shadow: 0 0 80px rgba(255,87,34,0.15), 0 0 200px rgba(255,87,34,0.08);
    }

    /* HERO */
    .hero {
        position: relative;
        width: 100%;
        aspect-ratio: 1 / 1;
        overflow: hidden;
    }

    .hero img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;
    }

    .hero-overlay {
        position: absolute;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: linear-gradient(to bottom, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.7) 100%);
        display: flex;
        align-items: flex-end;
        justify-content: center;
        padding-bottom: 40px;
    }

    @keyframes pulse-glow {
        0%   { box-shadow: 0 10px 40px rgba(255,87,34,0.6), 0 0 0 0 rgba(255,87,34,0.6); }
        70%  { box-shadow: 0 10px 40px rgba(255,87,34,0.6), 0 0 0 36px rgba(255,87,34,0); }
        100% { box-shadow: 0 10px 40px rgba(255,87,34,0.6), 0 0 0 0 rgba(255,87,34,0); }
    }

    .order-button-hero {
        background: linear-gradient(135deg, #ff5722 0%, #ff6f00 100%);
        border: none;
        padding: 18px 56px;
        border-radius: 50px;
        cursor: pointer;
        transition: transform 0.3s;
        animation: pulse-glow 1.4s ease-in-out infinite;
        font-family: 'Montserrat', sans-serif;
        font-size: 18px;
        font-weight: 800;
        color: white;
        text-transform: uppercase;
        letter-spacing: 2px;
    }

    main { padding: 25px 20px; }

    .repertoire {
        background: linear-gradient(135deg, rgba(0,0,0,0.7) 0%, rgba(45,24,16,0.5) 100%);
        padding: 25px;
        border-radius: 20px;
        border: 1px solid rgba(255,87,34,0.2);
        margin-bottom: 25px;
    }

    .contacts {
        background: linear-gradient(135deg, rgba(0,0,0,0.7) 0%, rgba(45,24,16,0.5) 100%);
        padding: 25px;
        border-radius: 20px;
        border: 1px solid rgba(255,87,34,0.2);
        text-align: center;
    }

    .orange-text { color: #ff5722; font-weight: 700; }
    .line { border: none; border-top: 2px solid #ff5722; margin: 15px 0; }

    h2 {
        font-family: 'Montserrat', sans-serif;
        color: #ff5722;
        text-align: center;
        margin: 12px 0;
        font-size: 1.3em;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 2px;
        text-shadow: 0 0 20px rgba(255,87,34,0.5);
    }

    h3 {
        font-family: 'Montserrat', sans-serif;
        color: #ff5722;
        margin-top: 15px;
        font-size: 0.95em;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    p {
        font-family: 'Montserrat', sans-serif;
        line-height: 1.5;
        margin: 6px 0;
        text-align: center;
        font-size: 0.88em;
        color: #fff;
        font-weight: 300;
    }

    .contact-links {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
        margin-top: 20px;
    }

    .contact-item {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        background: rgba(255,87,34,0.1);
        padding: 12px;
        border-radius: 50px;
        text-decoration: none;
        color: white;
        font-family: 'Montserrat', sans-serif;
        font-weight: 600;
        font-size: 0.8em;
        letter-spacing: 1px;
        text-transform: uppercase;
        border: 2px solid rgba(255,87,34,0.3);
        transition: all 0.3s;
    }

    .contact-item i { font-size: 18px; color: #ff5722; }

    footer {
        text-align: center;
        padding: 20px;
        color: rgba(255,255,255,0.4);
        font-size: 0.8em;
    }

    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideDown {
        from { transform: translateY(-50px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }

    .modal, .greeting-modal, .payment-modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0; top: 0;
        width: 100%; height: 100%;
        background-color: rgba(0,0,0,0.92);
        animation: fadeIn 0.3s;
    }

    .greeting-modal { z-index: 1001; }
    .payment-modal { z-index: 1002; background-color: rgba(0,0,0,0.97); }

    .modal-content, .greeting-content {
        background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #2d1810 100%);
        margin: 2% auto;
        padding: 25px;
        border: 3px solid #ff5722;
        border-radius: 20px;
        width: 90%;
        max-width: 430px;
        max-height: 85vh;
        overflow-y: auto;
        position: relative;
        animation: slideDown 0.3s;
        box-shadow: 0 0 50px rgba(255,87,34,0.5);
    }

    /* –ò–°–ü–†–ê–í–õ–ï–ù–û: –º–µ–Ω—å—à–µ –æ—Ç—Å—Ç—É–ø–æ–≤, –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ */
    .greeting-content {
        margin: 3% auto;
        max-height: none;
        overflow-y: visible;
        padding: 15px 20px;
    }

    .close {
        color: #ff5722;
        position: absolute;
        right: 20px; top: 15px;
        font-size: 35px;
        font-weight: bold;
        cursor: pointer;
    }

    .search-box { margin: 20px 0; }

    .search-box input {
        width: 100%;
        padding: 12px 20px;
        font-size: 16px;
        border: 2px solid #ff5722;
        border-radius: 30px;
        background: rgba(0,0,0,0.6);
        color: white;
        outline: none;
        font-family: 'Montserrat', sans-serif;
    }

    .search-box input::placeholder { color: rgba(255,255,255,0.5); }

    .song-item {
        padding: 10px 16px;
        margin: 5px 0;
        background: rgba(0,0,0,0.4);
        border-radius: 12px;
        cursor: pointer;
        font-family: 'Montserrat', sans-serif;
        font-size: 0.9em;
        color: #fff;
        border-left: 4px solid transparent;
        transition: all 0.3s;
    }

    .song-item:hover, .song-item:active {
        background: rgba(255,87,34,0.15);
        border-left-color: #ff5722;
    }

    /* –ò–°–ü–†–ê–í–õ–ï–ù–û: –º–µ–Ω—å—à–µ –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
    .selected-song-display {
        background: rgba(255,87,34,0.2);
        padding: 8px 12px;
        border-radius: 10px;
        margin-bottom: 8px;
        border-left: 4px solid #ff5722;
        font-family: 'Montserrat', sans-serif;
        font-weight: 600;
        font-size: 0.9em;
        color: #fff;
    }

    /* –ò–°–ü–†–ê–í–õ–ï–ù–û: –º–µ–Ω—å—à–µ –æ—Ç—Å—Ç—É–ø */
    .greeting-content > p {
        font-size: 0.85em;
        color: #ff5722;
        margin-bottom: 8px;
        margin-top: 4px;
        font-weight: 500;
    }

    /* –ò–°–ü–†–ê–í–õ–ï–ù–û: –º–µ–Ω—å—à–µ –≤—ã—Å–æ—Ç–∞, –±–µ–∑ –∑—É–º–∞ (font-size 16px) */
    .greeting-textarea {
        width: 100%;
        padding: 10px 12px;
        font-size: 16px;
        border: 2px solid #ff5722;
        border-radius: 15px;
        background: rgba(0,0,0,0.6);
        color: white;
        outline: none;
        margin-bottom: 6px;
        font-family: 'Montserrat', sans-serif;
        min-height: 80px;
        resize: none;
    }

    /* –ò–°–ü–†–ê–í–õ–ï–ù–û: –º–µ–Ω—å—à–µ –æ—Ç—Å—Ç—É–ø */
    .button-group { display: flex; gap: 10px; margin-top: 6px; }

    .btn-confirm, .btn-back {
        flex: 1;
        padding: 12px;
        font-family: 'Montserrat', sans-serif;
        font-size: 13px;
        font-weight: 700;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.3s;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .btn-confirm {
        background: linear-gradient(135deg, #ff5722 0%, #ff6f00 100%);
        color: white;
        box-shadow: 0 6px 25px rgba(255,87,34,0.5);
    }

    .btn-back {
        background: rgba(255,255,255,0.1);
        color: white;
        border: 2px solid #ff5722;
    }

    /* –≠–ö–†–ê–ù –û–ü–õ–ê–¢–´ */
    .payment-content {
        background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #2d1810 100%);
        margin: 15% auto;
        padding: 50px 30px;
        border: 3px solid #ff5722;
        border-radius: 20px;
        width: 90%;
        max-width: 430px;
        text-align: center;
        animation: slideDown 0.3s;
        box-shadow: 0 0 60px rgba(255,87,34,0.6);
    }

    .payment-amount {
        font-family: 'Montserrat', sans-serif;
        font-size: 5.5em;
        font-weight: 900;
        color: #ff5722;
        text-shadow: 0 0 30px rgba(255,87,34,0.8);
        line-height: 1;
    }

    .payment-label {
        font-family: 'Montserrat', sans-serif;
        font-size: 1em;
        font-weight: 600;
        color: rgba(255,255,255,0.7);
        text-transform: uppercase;
        letter-spacing: 3px;
        margin: 10px 0 35px;
    }

    .user-badge {
        display: flex;
        align-items: center;
        gap: 10px;
        background: rgba(255,87,34,0.1);
        border: 1px solid rgba(255,87,34,0.3);
        border-radius: 50px;
        padding: 8px 16px;
        margin-bottom: 20px;
        font-family: 'Montserrat', sans-serif;
        font-size: 0.85em;
        color: rgba(255,255,255,0.8);
    }

    .user-badge i { color: #ff5722; }

    .btn-pay {
        width: 100%;
        padding: 18px;
        font-family: 'Montserrat', sans-serif;
        font-size: 17px;
        font-weight: 700;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        background: linear-gradient(135deg, #ff5722 0%, #ff6f00 100%);
        color: white;
        text-transform: uppercase;
        letter-spacing: 2px;
        box-shadow: 0 6px 30px rgba(255,87,34,0.6);
        transition: all 0.3s;
        margin-bottom: 12px;
    }

    .btn-pay:disabled { opacity: 0.6; cursor: not-allowed; }

    .btn-pay-back {
        width: 100%;
        padding: 12px;
        font-family: 'Montserrat', sans-serif;
        font-size: 14px;
        font-weight: 600;
        border: 2px solid rgba(255,255,255,0.2);
        border-radius: 50px;
        cursor: pointer;
        background: transparent;
        color: rgba(255,255,255,0.5);
        transition: all 0.3s;
    }

    .success-screen {
        display: none;
        position: fixed;
        z-index: 2000;
        left: 0; top: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.97);
        justify-content: center;
        align-items: center;
        flex-direction: column;
        text-align: center;
        padding: 30px;
        animation: fadeIn 0.3s;
    }

    .success-screen.active { display: flex; }
    .success-icon { font-size: 80px; margin-bottom: 20px; }
    .success-screen h2 { margin-bottom: 15px; font-size: 1.5em; }
    .success-screen p { font-size: 1em; color: rgba(255,255,255,0.7); line-height: 1.7; }
</style>
```

</head>
<body>

<div id="app">
    <div class="hero">
        <img src="IMG_4643.jpeg" alt="LAPA TIGRA">
        <div class="hero-overlay">
            <button class="order-button-hero" id="openModalBtn">–ó–∞–∫–∞–∑–∞—Ç—å –ø–µ—Å–Ω—é</button>
        </div>
    </div>

```
<main>
    <div class="repertoire">
        <h2>–ó–∞–∫–∞–∑ –ø–µ—Å–Ω–∏ –∑–∞ 1000‚ÇΩ</h2>
        <p>–í—ã–±–µ—Ä–∏ –ø–µ—Å–Ω—é –∏–∑ —Ä–µ–ø–µ—Ä—Ç—É–∞—Ä–∞ –∏ –Ω–∞–ø–∏—à–∏ —Ç–µ–∫—Å—Ç –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è ‚Äî –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!</p>
        <hr class="line">
        <p><span class="orange-text">–ü–æ—Ä—è–¥–æ–∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è:</span></p>
        <p>–° 20:30 –¥–æ 21:00 &nbsp;|&nbsp; –° 21:30 –¥–æ 22:00<br>–° 22:30 –¥–æ 23:00 &nbsp;|&nbsp; (–ø—Ç, —Å–±) –° 23:30 –¥–æ 00:00</p>
        <hr class="line">
        <p class="orange-text">–¢–û–õ–¨–ö–û –ü–ï–°–ù–ò –ò–ó –†–ï–ü–ï–†–¢–£–ê–†–ê</p>
    </div>

    <div class="contacts">
        <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
        <div class="contact-links">
            <a href="https://music.yandex.ru/artist/19420584" target="_blank" class="contact-item">
                <i class="fas fa-music"></i><span>–Ø–Ω–¥–µ–∫—Å –ú—É–∑—ã–∫–∞</span>
            </a>
            <a href="https://instagram.com/lapa_tigra_music" target="_blank" class="contact-item">
                <i class="fab fa-instagram"></i><span>Instagram</span>
            </a>
            <a href="https://vk.com/lapa.tigra" target="_blank" class="contact-item">
                <i class="fab fa-vk"></i><span>–í–ö–æ–Ω—Ç–∞–∫—Ç–µ</span>
            </a>
            <a href="https://t.me/lapa_tigra_music" target="_blank" class="contact-item">
                <i class="fab fa-telegram"></i><span>Telegram</span>
            </a>
        </div>
    </div>
</main>

<footer><p>¬© 2025 LAPA TIGRA</p></footer>
```

</div>

<!-- –°–ø–∏—Å–æ–∫ –ø–µ—Å–µ–Ω -->

<div id="myModal" class="modal">
    <div class="modal-content">
        <span class="close" id="closeModal">&times;</span>
        <h2>–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Å–Ω—é</h2>
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="üîç –ü–æ–∏—Å–∫...">
        </div>
        <div id="songList"></div>
    </div>
</div>

<!-- –ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ -->

<div id="greetingModal" class="greeting-modal">
    <div class="greeting-content">
        <span class="close" id="closeGreeting">&times;</span>
        <p>–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è 1000‚ÇΩ</p>
        <div class="selected-song-display" id="selectedSongDisplay"></div>
        <textarea class="greeting-textarea" id="greetingText" placeholder="–¢–µ–∫—Å—Ç –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è (–∏–º—è, –ø–æ–∂–µ–ª–∞–Ω–∏—è...)"></textarea>
        <div class="button-group">
            <button class="btn-back" id="backBtn">–ù–∞–∑–∞–¥</button>
            <button class="btn-confirm" id="confirmBtn">–î–∞–ª–µ–µ ‚Üí</button>
        </div>
    </div>
</div>

<!-- –≠–∫—Ä–∞–Ω –æ–ø–ª–∞—Ç—ã -->

<div id="paymentModal" class="payment-modal">
    <div class="payment-content">
        <div id="userBadge" class="user-badge" style="display:none">
            <i class="fab fa-telegram"></i>
            <span id="userBadgeText"></span>
        </div>
        <div class="payment-amount">1000‚ÇΩ</div>
        <div class="payment-label">–ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
        <button class="btn-pay" id="payBtn">üí≥ –û–ø–ª–∞—Ç–∏—Ç—å</button>
        <button class="btn-pay-back" id="payBackBtn">‚Üê –ù–∞–∑–∞–¥</button>
    </div>
</div>

<!-- –≠–∫—Ä–∞–Ω —É—Å–ø–µ—Ö–∞ -->

<div class="success-screen" id="successScreen">
    <div class="success-icon">üéâ</div>
    <h2>–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!</h2>
    <p>–°–µ–π—á–∞—Å –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã.<br><br>–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã —è –ø–æ–ª—É—á—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏ —Å–∫–æ—Ä–æ –∏—Å–ø–æ–ª–Ω—é —Ç–≤–æ—é –ø–µ—Å–Ω—é üé∏</p>
</div>

<script>
    const tg = window.Telegram?.WebApp;
    if (tg) {
        tg.expand();
        tg.setHeaderColor('#080808');
        tg.setBackgroundColor('#080808');
    }

    const tgUser = tg?.initDataUnsafe?.user || null;

    if (tgUser) {
        const badge = document.getElementById('userBadge');
        const badgeText = document.getElementById('userBadgeText');
        const name = tgUser.first_name + (tgUser.last_name ? ' ' + tgUser.last_name : '');
        badgeText.textContent = name + (tgUser.username ? ' ¬∑ @' + tgUser.username : '');
        badge.style.display = 'flex';
    }

    const songs = [
        { category: '–ê', items: ['–ê–≥—É—Ç–∏–Ω - –ö–∞–∫ –Ω–µ –¥—É–º–∞—Ç—å –æ —Ç–µ–±–µ', '–ê–≥—É—Ç–∏–Ω - –ü–æ–ª–æ–≤–∏–Ω–∞ —Å–µ—Ä–¥—Ü–∞', '–ê–º–µ–≥–∞ - –õ–µ—Ç–µ—Ç—å', '–ê–Ω–¥—Ä–µ–π –ì—É–±–∏–Ω - –î–µ–≤—É—à–∫–∏, –∫–∞–∫ –∑–≤–µ–∑–¥—ã', '–ê–Ω–¥—Ä–µ–π –ì—É–±–∏–Ω - –ù–æ—á—å', '–ê–Ω—Ç–æ–Ω –¢–æ–∫–∞—Ä–µ–≤ - –°–µ–¥—å–º–æ–π –õ–µ–ø–µ—Å—Ç–æ–∫', '–ê–Ω—Ç–æ–Ω–æ–≤ –Æ—Ä–∏–π - –õ–µ—Ç—è—â–µ–π –ø–æ—Ö–æ–¥–∫–æ–π', '–ê–Ω—Ç–æ–Ω–æ–≤ –Æ—Ä–∏–π - –ú–µ—á—Ç–∞ —Å–±—ã–≤–∞–µ—Ç—Å—è', '–ê—Ä—Ç—É—Ä –ü–∏—Ä–æ–∂–∫–æ–≤ ‚Äì –ó–∞—Ü–µ–ø–∏–ª–∞']},
        { category: '–ë', items: ['–ë–∞—Å—Ç–∞ - –ú–µ–¥–ª—è—á–æ–∫', '–ë–∞—Å—Ç–∞ - –°–∞–Ω—Å–∞—Ä–∞', '–ë—Ä–∞–≤–æ - –í–∞—Å', '–ë—Ä–∞–≤–æ - –õ—é–±–∏—Ç–µ –¥–µ–≤—É—à–∫–∏', '–ë—Ä–∞–≤–æ - –Ø —Ç–æ —á—Ç–æ –Ω–∞–¥–æ', '–ë—Ä–∞–≤–æ - –ö–∞–∫ –∂–∞–ª—å', '–ë—É–º–±–æ–∫—Å - –í–∞—Ö—Ç–µ—Ä–∞–º']},
        { category: '–í', items: ['–í–∞–Ω—è –î–º–∏—Ç—Ä–∏–µ–Ω–∫–æ - –í–µ–Ω–µ—Ä–∞ —é–ø–∏—Ç–µ—Ä', '–í–∏–¥–µ–ª–∏ –Ω–æ—á—å']},
        { category: '–ì', items: ['–ì—Ä–∞–¥—É—Å—ã - –ì–æ–ª–∞—è', 'Galibri x Mavik - –§–µ–¥–µ—Ä–∏–∫–æ –§–µ–ª–ª–∏–Ω–∏', 'Gayazov Brothers - –ú–∞–ª–∏–Ω–æ–≤–∞—è –õ–∞–¥–∞']},
        { category: '–î', items: ['–î–∏–º–∞ –ë–∏–ª–∞–Ω - –î–µ—Ä–∂–∏', '–î–∏–º–∞ –ë–∏–ª–∞–Ω - –ú–æ–ª–Ω–∏—è', '–î–∏–º–∞ –ë–∏–ª–∞–Ω - –û—Å—Ç—Ä–æ–π –±—Ä–∏—Ç–≤–æ–π', 'D–∞–¨ro - –ù–∞ —á–∞—Å–∞—Ö 00', 'D–∞–¨ro - –Æ–Ω–æ—Å—Ç—å']},
        { category: '–ñ', items: ['–ñ—É–∫–∏ - –ë–∞—Ç–∞—Ä–µ–π–∫–∞']},
        { category: '–ó', items: ['–ó–≤–µ—Ä–∏ - –í—Å–µ —á—Ç–æ —Ç–µ–±—è –∫–∞—Å–∞–µ—Ç—Å—è', '–ó–≤–µ—Ä–∏ - –†–∞–π–æ–Ω—ã-–∫–≤–∞—Ä—Ç–∞–ª—ã', '–ó–≤–µ—Ä–∏ - –¢–∞–Ω—Ü—É–π', '–ó–µ–º–ª—è–Ω–µ - –¢—Ä–∞–≤–∞ —É –¥–æ–º–∞']},
        { category: '–ò', items: ['–ò–≤–∞–Ω—É—à–∫–∏ - —Ç–æ–ø–æ–ª–∏–Ω—ã–π –ø—É—Ö']},
        { category: '–ö', items: ['–ö–æ—Ä–Ω–∏ - –¢—ã —É–∑–Ω–∞–µ—à—å –µ–µ', '–ö–æ—Ä–Ω–∏ - —Å –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è, –í–∏–∫–∞', '–ö–æ—Ä–æ–ª—å –∏ –®—É—Ç - –ö—É–∫–ª–∞ –∫–æ–ª–¥—É–Ω–∞', '–ö—Ä–∏–¥ - –°–∞–º–∞—è —Å–∞–º–∞—è', '–ö—Ä–∏–¥ - –ú–æ—è –Ω–µ–≤–µ—Å—Ç–∞']},
        { category: '–õ', items: ['–õ–∞–∑–∞—Ä–µ–≤ - –í —Å–∞–º–æ–µ —Å–µ—Ä–¥—Ü–µ', '–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥ - –†—ã–±–∞ –º–æ–µ–π –º–µ—á—Ç—ã', '–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥ - WWW', '–õ–µ–ø—Ä–∫–æ–Ω—Å—ã - –•–∞–ª–∏ –ì–∞–ª–∏']},
        { category: '–ú', items: ['–ú—É–º–∏–π –¢—Ä–æ–ª–ª—å - –í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫ 2000', '–ú—É–º–∏–π –¢—Ä–æ–ª–ª—å - –ù–µ–≤–µ—Å—Ç–∞', '–ú—É—Ä–∞—Ç –ù–∞—Å—ã—Ä–æ–≤ - –Ø —ç—Ç–æ —Ç—ã', 'MACAN - Asphalt 8']},
        { category: '–ù', items: ['–ù–∏–ª–µ—Ç—Ç–æ - –õ—é–±–∏–º–∫–∞', '–ù–∏–ª–µ—Ç—Ç–æ —Ö –î–∂–∏–≥–∞–Ω —Ö Artik & Asti - –•—É–¥–∏', '–ù–∏–ª–µ—Ç—Ç–æ —Ö –°–≤–∏–∫ —Ö –û–ª–µ–≥ –ú–∞–π–∞–º–∏ - –ù–µ –≤—Å–ø–æ–º–∏–Ω–∞–π']},
        { category: '–û', items: ['–û—Ç–ø–µ—Ç—ã–µ –ú–æ—à. - –õ—é–±–∏ –º–µ–Ω—è –ª—é–±–∏']},
        { category: '–†', items: ['–†—É–∫–∏ –≤–≤–µ—Ä—Ö - –ö—Ä–æ—à–∫–∞ –º–æ—è', '–†—É–∫–∏ –≤–≤–µ—Ä—Ö - –û–Ω —Ç–µ–±—è —Ü–µ–ª—É–µ—Ç', '–†—É–∫–∏ –≤–≤–µ—Ä—Ö - 18 –º–Ω–µ', '–†—É–∫–∏ –≤–≤–µ—Ä—Ö - –ê–ª–µ—à–∫–∞']},
        { category: '–°', items: ['–°–ø–ª–∏–Ω - –í—ã—Ö–æ–¥–∞ –Ω–µ—Ç', '–°–ø–ª–∏–Ω - –ú–æ–µ —Å–µ—Ä–¥—Ü–µ', '–°—É–ª—Ç–∞–Ω –õ–∞–≥—É—á–µ–≤ - –ì–æ—Ä—å–∫–∏–π –≤–∫—É—Å']},
        { category: '–¢', items: ['–¢–∏–º–∞ –ë–µ–ª–æ—Ä—É—Å—Å–∫–∏—Ö - –ù–µ–∑–∞–±—É–¥–∫–∞', '–¢–æ—Å—è –ß–∞–π–∫–∏–Ω–∞ —Ö Markul - –°—Ç—Ä–µ–ª—ã']},
        { category: '–•', items: ['–•–∞–±–∏–± - –Ø–≥–æ–¥–∞ - –ú–∞–ª–∏–Ω–∫–∞', '–•–û–õ–ò–î–ï–ô–ë–û–ô - –•—É–ª–∏–≥–∞–Ω–∫–∞', '–•–û–õ–ò–î–ï–ô–ë–û–ô - –ü–æ–∂–∞—Ä—ã']},
        { category: '–ß', items: ['–ß–µ–±–∞–Ω–æ–≤ - –°–æ–ª–¥–∞—Ç –ª—é–±–≤–∏']},
        { category: '–®', items: ['–®–∞—Ç—É–Ω–æ–≤ - –ë–µ–ª—ã–µ —Ä–æ–∑—ã', '–®–∞—Ç—É–Ω–æ–≤ - –°–µ–¥–∞—è –Ω–æ—á—å', '–®–∞—Ç—É–Ω–æ–≤ - –î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è']},
        { category: '–≠', items: ['–≠–ª–¥–∂–µ–π —Ö –§–µ–¥—É–∫ - –†–æ–∑–æ–≤–æ–µ –≤–∏–Ω–æ']},
        { category: '–ó–ê–†–£–ë–ï–ñ–ù–´–ï', items: ['Blur - Song 2', 'Bon Jovi - Its My Life', 'Bomfunk MCs - Freestyler', 'Bruno Mars ‚Äì Uptown Funk', 'DNCE - Cake by the ocean', 'Elvis Presley - Blues way shoes', 'Fly Project - La musica', 'JONY - –ö–æ–º–µ—Ç–∞', 'Justin Timberlake - Cant stop the Feeling', 'John Newman - Love me again', 'Limp Bizkit - Behind Blue Eyes', 'Linkin Park - In the end', 'Maneskin - Beggin', 'Maroon 5 - This Love', 'Michael Teo - Nosa', 'Pharrell - Happy', 'Questpistols - –ë–µ–ª–∞—è —Å—Ç—Ä–µ–∫–æ–∑–∞', 'Questpistols - –†–µ–≤–æ–ª—é—Ü–∏—è', 'Red Hot Chili Peppers - Cant stop', 'Robbie Williams - Feel', 'Ricky Martin - Livin la Vida Loca', 'Stone Sour - Througth the glass', 'The Black Eyed Peas ‚Äì Lets Get It Started']}
    ];

    const modal = document.getElementById('myModal');
    const greetingModal = document.getElementById('greetingModal');
    const paymentModal = document.getElementById('paymentModal');
    const songList = document.getElementById('songList');
    const searchInput = document.getElementById('searchInput');
    const selectedSongDisplay = document.getElementById('selectedSongDisplay');
    const greetingText = document.getElementById('greetingText');

    let selectedSong = null;

    document.getElementById('openModalBtn').onclick = () => {
        modal.style.display = 'block';
        renderSongs();
        setTimeout(() => searchInput.focus(), 300);
    };

    document.getElementById('closeModal').onclick = () => modal.style.display = 'none';
    document.getElementById('closeGreeting').onclick = () => greetingModal.style.display = 'none';

    function renderSongs(filter = '') {
        songList.innerHTML = '';
        songs.forEach(cat => {
            const items = cat.items.filter(s => s.toLowerCase().includes(filter.toLowerCase()));
            if (items.length > 0) {
                const h3 = document.createElement('h3');
                h3.textContent = cat.category;
                songList.appendChild(h3);
                items.forEach(song => {
                    const div = document.createElement('div');
                    div.className = 'song-item';
                    div.textContent = song;
                    div.onclick = () => {
                        selectedSong = song;
                        selectedSongDisplay.textContent = 'üéµ ' + song;
                        modal.style.display = 'none';
                        greetingText.value = '';
                        greetingModal.style.display = 'block';
                    };
                    songList.appendChild(div);
                });
            }
        });
    }

    searchInput.addEventListener('input', e => renderSongs(e.target.value));

    document.getElementById('backBtn').onclick = () => {
        greetingModal.style.display = 'none';
        modal.style.display = 'block';
    };

    document.getElementById('confirmBtn').onclick = () => {
        const greeting = greetingText.value.trim();
        if (!greeting) {
            if (tg) tg.showAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ —Ç–µ–∫—Å—Ç –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è üôè');
            else alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ —Ç–µ–∫—Å—Ç –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è');
            return;
        }
        greetingModal.style.display = 'none';
        paymentModal.style.display = 'block';
    };

    document.getElementById('payBackBtn').onclick = () => {
        paymentModal.style.display = 'none';
        greetingModal.style.display = 'block';
    };

    document.getElementById('payBtn').onclick = async function() {
        const greeting = greetingText.value.trim();
        const btn = this;
        btn.disabled = true;
        btn.textContent = '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞...';

        try {
            await fetch('/api/notify', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    song: selectedSong,
                    greeting: greeting,
                    user: tgUser
                })
            });
        } catch(e) {
            console.error('Notify error:', e);
        }

        document.getElementById('successScreen').classList.add('active');
        setTimeout(() => {
            window.location.href = 'https://tips.yandex.ru/guest/payment/8888490?amount=1000';
        }, 2000);
    };

    window.onclick = function(e) {
        if (e.target == modal) modal.style.display = 'none';
        if (e.target == greetingModal) greetingModal.style.display = 'none';
        if (e.target == paymentModal) paymentModal.style.display = 'none';
    };
</script>

</body>
</html>